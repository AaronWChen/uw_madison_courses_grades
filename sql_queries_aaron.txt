File contains a rotating list of SQL queries that may be used in final 
Python scripts


teachings table
SELECT COUNT(DISTINCT instructor_id) as teacher_count, COUNT(DISTINCT section_uuid) as section_count
FROM teachings;
    This let us know that the primary key was actually section_uuid

rooms table
SELECT COUNT(DISTINCT uuid) as room_count, COUNT(DISTINCT facility_code) as facility_count, COUNT(DISTINCT room_code) as room_count
FROM rooms;

schedules table
SELECT COUNT(DISTINCT uuid) as class_id, COUNT(DISTINCT start_time) as start_times, 
COUNT(DISTINCT end_time) as end_times,
COUNT(DISTINCT mon) as mondays,
COUNT(DISTINCT tues) as tuesdays,
COUNT(DISTINCT wed) as wednesdays,
COUNT(DISTINCT thurs) as thursdays,
COUNT(DISTINCT fri) as fridays,
COUNT(DISTINCT sat) as saturdays,
COUNT(DISTINCT sun) as sundays
FROM schedules
WHERE start_time != '-1';


sections table
SELECT * 
FROM sections.columns


SELECT c.name as course__name, c.number, 
    co.term_code, co.name as course_offering_name, 
    sections.section_type, 
    inst.name, 
FROM courses as c
JOIN course_offerings as co on c.uuid = co.course_uuid
JOIN sections on co.uuid = sections.course_offering_uuid
JOIN schedules as sch on sections.schedule_uuid = sch.uuid
JOIN rooms on sections.room_uuid = rooms.uuid
JOIN teachings on sections.uuid = teachings.section_uuid
JOIN instructors as inst on teachings.instructor_id = inst.id;

SELECT c.name as course__name, c.number, 
    co.term_code, co.name as course_offering_name, 
    sections.section_type, 
    inst.name 
FROM courses as c
JOIN course_offerings as co on c.uuid = co.course_uuid
JOIN sections on co.uuid = sections.course_offering_uuid
JOIN schedules as sch on sections.schedule_uuid = sch.uuid
JOIN rooms on sections.room_uuid = rooms.uuid
JOIN teachings on sections.uuid = teachings.section_uuid
JOIN instructors as inst on teachings.instructor_id = inst.id
WHERE start_time = '-1';

SELECT COUNT(DISTINCT c.name) as course_names, COUNT(DISTINCT c.number) as course_numbers, 
    COUNT(DISTINCT co.term_code), COUNT(DISTINCT co.name) as course_offering_name, 
    COUNT(DISTINCT sections.section_type), 
    COUNT(DISTINCT inst.name) 
FROM courses as c
JOIN course_offerings as co on c.uuid = co.course_uuid
JOIN sections on co.uuid = sections.course_offering_uuid
JOIN schedules as sch on sections.schedule_uuid = sch.uuid
JOIN rooms on sections.room_uuid = rooms.uuid
JOIN teachings on sections.uuid = teachings.section_uuid
JOIN instructors as inst on teachings.instructor_id = inst.id
WHERE start_time = '-1';
    Uniques: 390 course_names, 285 course numbers, 22 term codes, 395 course offering names, 
            5 section types, 664 instructors

CREATE MATERIALIZED VIEW start_time_at_minus_one as
    SELECT COUNT(DISTINCT c.name) as course_names, COUNT(DISTINCT c.number) as course_numbers, 
        COUNT(DISTINCT co.term_code) as term_codes, COUNT(DISTINCT co.name) as course_offering_names, 
        COUNT(DISTINCT sections.section_type) as section_types, 
        COUNT(DISTINCT inst.name) as teachers
    FROM courses as c
    JOIN course_offerings as co on c.uuid = co.course_uuid
    JOIN sections on co.uuid = sections.course_offering_uuid
    JOIN schedules as sch on sections.schedule_uuid = sch.uuid
    JOIN rooms on sections.room_uuid = rooms.uuid
    JOIN teachings on sections.uuid = teachings.section_uuid
    JOIN instructors as inst on teachings.instructor_id = inst.id
    WHERE start_time = '-1';


SELECT COUNT(DISTINCT c.name) as course_names, COUNT(DISTINCT c.number) as course_numbers, 
    COUNT(DISTINCT co.term_code), COUNT(DISTINCT co.name) as course_offering_name, 
    COUNT(DISTINCT sections.section_type), 
    COUNT(DISTINCT inst.name) 
FROM courses as c
JOIN course_offerings as co on c.uuid = co.course_uuid
JOIN sections on co.uuid = sections.course_offering_uuid
JOIN schedules as sch on sections.schedule_uuid = sch.uuid
JOIN rooms on sections.room_uuid = rooms.uuid
JOIN teachings on sections.uuid = teachings.section_uuid
JOIN instructors as inst on teachings.instructor_id = inst.id
WHERE end_time = '-1';
    Appears to make the same table as the start_time_at_minus_one table

CREATE MATERIALIZED VIEW start_time_at_minus_one as
    SELECT c.name as course_names, c.number as course_numbers, 
        co.term_code as term_codes, co.name as course_offering_names, co.uuid as course_offering_id,
        sections.section_type as section_types, 
        inst.name as teachers
    FROM courses as c
    JOIN course_offerings as co on c.uuid = co.course_uuid
    JOIN sections on co.uuid = sections.course_offering_uuid
    JOIN schedules as sch on sections.schedule_uuid = sch.uuid
    JOIN rooms on sections.room_uuid = rooms.uuid
    JOIN teachings on sections.uuid = teachings.section_uuid
    JOIN instructors as inst on teachings.instructor_id = inst.id
    WHERE start_time = '-1';


CREATE MATERIALIZED VIEW end_time_at_minus_one as
    SELECT c.name as course_names, c.number as course_numbers, 
        co.term_code as term_codes, co.name as course_offering_names, co.uuid as course_offering_id,
        sections.section_type as section_types, 
        inst.name as teachers
    FROM courses as c
    JOIN course_offerings as co on c.uuid = co.course_uuid
    JOIN sections on co.uuid = sections.course_offering_uuid
    JOIN schedules as sch on sections.schedule_uuid = sch.uuid
    JOIN rooms on sections.room_uuid = rooms.uuid
    JOIN teachings on sections.uuid = teachings.section_uuid
    JOIN instructors as inst on teachings.instructor_id = inst.id
    WHERE end_time = '-1';


SELECT count (1)
FROM start_time_at_minus_one as a
FULL OUTER JOIN end_time_at_minus_one as b
    USING (course_offering_id)
WHERE a.course_offering_id IS NULL
    OR b.course_offering_id IS NULL ;


query = """SELECT c.uuid, c.name,
                    subj.code AS subject_code, subj.name AS subject_name,
                    gdc.section_number,

                    (gdc.a_count * 4 + gdc.ab_count * 3.5 + gdc.b_count * 3 + gdc.bc_count * 2.5 + gdc.c_count * 2 + gdc.d_count * 1)
                        / (gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) AS section_gpa,

                    (gdc.s_count + gdc.u_count + gdc.cr_count + gdc.n_count + gdc.p_count + gdc.i_count + gdc.nw_count + gdc.nr_count 
                        + gdc.other_count) AS non_gpa_count
                FROM subjects AS subj
                JOIN subject_memberships AS sm ON subj.code = sm.subject_code
                JOIN course_offerings AS c ON cm.course_offering_uuid = c.uuid
                JOIN grade_distributions_casted AS gdc ON c.uuid = gdc.course_offering_uuid

            WHERE (gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) != 0
                AND ((sch.mon = 'true') OR (sch.tues = 'true') OR (sch.wed = 'true') OR (sch.thurs = 'true') 
                OR (sch.fri = 'true') OR (sch.sat = 'true') OR (sch.sun = 'true'))
                AND subject_code IN ('108', '112', '120', '130', '132', '144', '146', '148', '188', '192', '200', '205', '206', '208', '210', '217', '220', '224', '266', '292', '320', '330', '346', '347', 348', '355', '360', '362', '370', '390', '396', '412', '416', '418', '420', '436', '480', '496', '503', '600', '604', '612', '616', '620', '621', '622', '623', '628', '632', '636', '640', '650', '676', '678', '681', '682', '684', '691', '692', '694', '695', '700', '702', '704', '708', '718', '724', '726', '728', '742', '745', '750', '754', '758', '762', '766', '810', '832', '840', '908', '932', '934', '936', '938', '939', '952', '960')
            GROUP BY c.uuid, c.name, subj.name, subj.code, section_gpa, non_gpa_count, gdc.section_number; 
            """



SELECT c.uuid, c.name,
        subj.code AS subject_code, subj.name AS subject_name,
        gdc.section_number,

        (gdc.a_count * 4 + gdc.ab_count * 3.5 + gdc.b_count * 3 + gdc.bc_count * 2.5 + gdc.c_count * 2 + gdc.d_count * 1)
            / (gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) AS section_gpa,

        (gdc.s_count + gdc.u_count + gdc.cr_count + gdc.n_count + gdc.p_count + gdc.i_count + gdc.nw_count + gdc.nr_count 
            + gdc.other_count) AS non_gpa_count
FROM subjects AS subj
JOIN subject_memberships AS sm ON subj.code = sm.subject_code
JOIN course_offerings AS c ON sm.course_offering_uuid = c.uuid
JOIN grade_distributions_casted AS gdc ON c.uuid = gdc.course_offering_uuid

WHERE ((gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) != 0)
    AND (subject_code IN ('108', '112', '120', '130', '132', '144', '146', '148', '188', '192', '200', '205', '206', '208', '210', '217', '220', '224', '266', '292', '320', '330', '346', '347', '348', '355', '360', '362', '370', '390', '396', '412', '416', '418', '420', '436', '480', '496', '503', '600', '604', '612', '616', '620', '621', '622', '623', '628', '632', '636', '640', '650', '676', '678', '681', '682', '684', '691', '692', '694', '695', '700', '702', '704', '708', '718', '724', '726', '728', '742', '745', '750', '754', '758', '762', '766', '810', '832', '840', '908', '932', '934', '936', '938', '939', '952', '960'))

GROUP BY c.uuid, c.name, subj.name, subj.code, section_gpa, non_gpa_count, gdc.section_number; 



SELECT c.uuid, c.name,
        subj.code AS subject_code, subj.name AS subject_name,
        gdc.section_number,

        (gdc.a_count * 4 + gdc.ab_count * 3.5 + gdc.b_count * 3 + gdc.bc_count * 2.5 + gdc.c_count * 2 + gdc.d_count * 1)
            / (gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) AS section_gpa,

        (gdc.s_count + gdc.u_count + gdc.cr_count + gdc.n_count + gdc.p_count + gdc.i_count + gdc.nw_count + gdc.nr_count 
            + gdc.other_count) AS non_gpa_count
FROM subjects AS subj
JOIN subject_memberships AS sm ON subj.code = sm.subject_code
JOIN course_offerings AS c ON sm.course_offering_uuid = c.uuid
JOIN grade_distributions_casted AS gdc ON c.uuid = gdc.course_offering_uuid

WHERE ((gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) != 0)
    AND (subject_code NOT IN ('108', '112', '120', '130', '132', '144', '146', '148', '188', '192', '200', '205', '206', '208', '210', '217', '220', '224', '266', '292', '320', '330', '346', '347', '348', '355', '360', '362', '370', '390', '396', '412', '416', '418', '420', '436', '480', '496', '503', '600', '604', '612', '616', '620', '621', '622', '623', '628', '632', '636', '640', '650', '676', '678', '681', '682', '684', '691', '692', '694', '695', '700', '702', '704', '708', '718', '724', '726', '728', '742', '745', '750', '754', '758', '762', '766', '810', '832', '840', '908', '932', '934', '936', '938', '939', '952', '960'))

GROUP BY c.uuid, c.name, subj.name, subj.code, section_gpa, non_gpa_count, gdc.section_number; 


SELECT *
FROM 
    (SELECT c.uuid, c.name,
        sch.mon, sch.tues, sch.wed, sch.thurs, sch.fri, sch.sat, sch.sun,
        subj.name as subject_name,
        gdc.section_number,
        
        (gdc.a_count * 4 + gdc.ab_count * 3.5 + gdc.b_count * 3 + gdc.bc_count * 2.5 + gdc.c_count * 2 + gdc.d_count * 1)
            / (gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) AS section_gpa,

        (gdc.s_count + gdc.u_count + gdc.cr_count + gdc.n_count + gdc.p_count + gdc.i_count + gdc.nw_count + gdc.nr_count 
            + gdc.other_count) AS non_gpa_count
    FROM schedules AS sch
    JOIN sections ON sch.uuid = sections.schedule_uuid 
    JOIN course_offerings AS c ON sections.course_offering_uuid = c.uuid
    JOIN courses ON c.course_uuid = courses.uuid
    JOIN subject_memberships ON sections.course_offering_uuid = subject_memberships.course_offering_uuid
    JOIN subjects AS subj on subject_memberships.subject_code = subj.code
    JOIN grade_distributions_casted AS gdc ON c.uuid = gdc.course_offering_uuid
    GROUP BY c.uuid, c.name, section_gpa, non_gpa_count, sch.mon, sch.tues, sch.wed, sch.thurs, sch.fri, sch.sat, sch.sun, subj.name, gdc.section_number 
    ) AS gpa_days
WHERE (gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) != 0;




SELECT c.uuid, c.name,
        sch.mon, sch.tues, sch.wed, sch.thurs, sch.fri, sch.sat, sch.sun,
        subj.name as subject_name,
        gdc.section_number,
        
        (gdc.a_count * 4 + gdc.ab_count * 3.5 + gdc.b_count * 3 + gdc.bc_count * 2.5 + gdc.c_count * 2 + gdc.d_count * 1)
            / (gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) AS section_gpa,

        (gdc.s_count + gdc.u_count + gdc.cr_count + gdc.n_count + gdc.p_count + gdc.i_count + gdc.nw_count + gdc.nr_count 
            + gdc.other_count) AS non_gpa_count
    FROM schedules AS sch
    JOIN sections ON sch.uuid = sections.schedule_uuid 
    JOIN course_offerings AS c ON sections.course_offering_uuid = c.uuid
    JOIN courses ON c.course_uuid = courses.uuid
    JOIN subject_memberships ON sections.course_offering_uuid = subject_memberships.course_offering_uuid
    JOIN subjects AS subj on subject_memberships.subject_code = subj.code
    JOIN grade_distributions_casted AS gdc ON c.uuid = gdc.course_offering_uuid
    
WHERE (gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) != 0
    AND ((sch.mon = 'true') OR (sch.tues = 'true') OR (sch.wed = 'true') OR (sch.thurs = 'true') 
    OR (sch.fri = 'true') OR (sch.sat = 'true') OR (sch.sun = 'true'))
GROUP BY c.uuid, c.name, section_gpa, non_gpa_count, sch.mon, sch.tues, sch.wed, sch.thurs, sch.fri, sch.sat, sch.sun, subj.name, gdc.section_number; 


SELECT c.uuid, c.name,
        sch.mon, sch.tues, sch.wed, sch.thurs, sch.fri, sch.sat, sch.sun,
        subj.name as subject_name,
        gdc.section_number,
        
        (gdc.a_count * 4 + gdc.ab_count * 3.5 + gdc.b_count * 3 + gdc.bc_count * 2.5 + gdc.c_count * 2 + gdc.d_count * 1)
            / (gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) AS section_gpa,

        (gdc.s_count + gdc.u_count + gdc.cr_count + gdc.n_count + gdc.p_count + gdc.i_count + gdc.nw_count + gdc.nr_count 
            + gdc.other_count) AS non_gpa_count
    FROM schedules AS sch
    JOIN sections ON sch.uuid = sections.schedule_uuid 
    JOIN course_offerings AS c ON sections.course_offering_uuid = c.uuid
    JOIN courses ON c.course_uuid = courses.uuid
    JOIN subject_memberships ON sections.course_offering_uuid = subject_memberships.course_offering_uuid
    JOIN subjects AS subj on subject_memberships.subject_code = subj.code
    JOIN grade_distributions_casted AS gdc ON c.uuid = gdc.course_offering_uuid
    
WHERE (gdc.a_count + gdc.ab_count + gdc.b_count + gdc.bc_count + gdc.c_count + gdc.d_count + gdc.f_count) != 0
    AND (sch.mon = 'True')
GROUP BY c.uuid, c.name, section_gpa, non_gpa_count, sch.mon, sch.tues, sch.wed, sch.thurs, sch.fri, sch.sat, sch.sun, subj.name, gdc.section_number; 

new blue = #1f77b4
new orange = #ff7f0e